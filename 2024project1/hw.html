<!DOCTYPE html>
<html lang="en" style="background-color: rgb(255, 183, 107)">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The WWW as a Rube Goldberg machine</title>
    <style>
        #initTrigger, #searchButton {
            font-size: 30px; /* Set the font size to make the buttons bigger */
            font-weight: bold;
            padding: 10px 20px; /* Set padding for a larger clickable area */
            background-color: #4195cd; /* Set a background color */
            color: #fff; /* Set text color to white */
            border: none; /* Remove default button border */
            border-radius: 10px; /* Add some border radius for a rounded look */
            cursor: pointer; /* Add a pointer cursor for better user experience */
            margin-right: 10px; /* Add some margin between buttons */
        }

        #searchInput {
            font-size: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-right: 10px;
        }

        h3 {
            color: #fff; /* Set text color to white for h3 elements */
            font-weight: bold; /* Set font weight to bold for h3 elements */
            font-family: 'Arial', sans-serif; /* Set font family to sans-serif */
        }

        ul {
            list-style-type: none; /* Remove list bullet points */
            padding: 0; /* Remove default padding for the list */
        }

        ul li {
            font-weight: bold; /* Set font weight to bold for list items */
            color: #fff; /* Set text color to white for list items */
            font-family: 'Arial', sans-serif; /* Set font family to sans-serif */
        }
    </style>

</head>
<body>
    <input type="text" id="searchInput" placeholder="Search by name">
    <button role="button" id="initTrigger">Eat What Today?</button>
    <button role="button" id="searchButton">Search</button>
    <section id="mealSection"></section>

    <script>
        const triggerButton = document.getElementById('initTrigger');
        const searchButton = document.getElementById('searchButton');
        const searchInput = document.getElementById('searchInput');
        const mealSection = document.getElementById('mealSection');

        const randomMealURL = "https://www.themealdb.com/api/json/v1/1/random.php";
        const searchMealURL = "https://www.themealdb.com/api/json/v1/1/search.php?s=";

        const fetchMealData = (url) => {
            fetch(url)
                .then((response) => response.json())
                .then((payload) => appendMealData(payload))
                .catch((error) => console.error("Error fetching meal data:", error));
        }

        const appendMealData = (data) => {
            console.log(data);

            const firstMeal = data.meals ? data.meals[0] : data.meal; // Handle different API response structures
            if (!firstMeal) {
                console.error("No meal data found.");
                return;
            }

            const mealName = firstMeal.strMeal;
            const mealImg = firstMeal.strMealThumb;
            const ingredients = getIngredients(firstMeal);

            const nameHeader = document.createElement('h3');
            nameHeader.innerText = "Have some " + mealName;
            mealSection.appendChild(nameHeader);

            const image = document.createElement('img');
            image.src = mealImg;
            image.alt = "image of " + mealName;
            mealSection.appendChild(image);

            if (ingredients) {
                const ingredientsList = document.createElement('ul');
                ingredientsList.innerHTML = ingredients;
                mealSection.appendChild(ingredientsList);
            }

            const a = new Date(firstMeal.dateModified);
        }

        const getIngredients = (meal) => {
            let ingredients = '';
            for (let i = 1; i <= 20; i++) {
                const ingredient = meal['strIngredient' + i];
                const measure = meal['strMeasure' + i];
                if (ingredient && measure) {
                    ingredients += `<li>${measure} ${ingredient}</li>`;
                }
            }
            return ingredients;
        }

        triggerButton.addEventListener("click", () => fetchMealData(randomMealURL));
        
        searchButton.addEventListener("click", () => {
            const searchTerm = searchInput.value.trim();
            if (searchTerm !== "") {
                fetchMealData(searchMealURL + searchTerm);
            } else {
                console.error("Please enter a search term.");
            }
        });
    </script>
</body>
</html>


