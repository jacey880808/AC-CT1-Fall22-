<!DOCTYPE html>
<html lang="en" style="background-color: rgb(255, 183, 107)">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The WWW as a Rube Goldberg machine</title>
    <style>
        #initTrigger, #searchButton, #randomMealButton {
            font-size: 30px; /* Set the font size to make the buttons bigger */
            font-weight: bold;
            padding: 10px 20px; /* Set padding for a larger clickable area */
            border: none; /* Remove default button border */
            border-radius: 10px; /* Add some border radius for a rounded look */
            cursor: pointer; /* Add a pointer cursor for better user experience */
            margin-right: 10px; /* Add some margin between buttons */
        }

        #searchButton {
            font-size: 30px;
            padding: 10px 20px; /* Set padding for a larger clickable area for the "Search" button */
            background-color: #fff; /* Change background color to white for the "Search" button */
            color: #3498db; /* Set text color to blue for the "Search" button */
        }

        #initTrigger, #randomMealButton {
            background-color: #4195cd; /* Set a background color for the "Eat What Today?" and "Random Meal's Ingredients" buttons */
            color: #fff; /* Set text color to white */
        }

        h3 {
            color: #fff; /* Set text color to white for h3 elements */
            font-weight: bold; /* Set font weight to bold for h3 elements */
            font-family: 'Arial', sans-serif; /* Set font family to sans-serif */
        }

        ul {
            list-style-type: none; /* Remove list bullet points */
            padding: 0; /* Remove default padding for the list */
        }

        ul li {
            font-weight: bold; /* Set font weight to bold for list items */
            color: #fff; /* Set text color to white for list items */
            font-family: 'Arial', sans-serif; /* Set font family to sans-serif */
        }
    </style>

</head>
<body>
    <input type="text" id="searchInput" placeholder="Search by name">
    <button role="button" id="searchButton">Search</button>
    
    <button role="button" id="initTrigger">Eat What Today?</button>
    <button role="button" id="randomMealButton">Make Something?</button>
    <section id="mealSection"></section>

    <script>
        const triggerButton = document.getElementById('initTrigger');
        const searchButton = document.getElementById('searchButton');
        const randomMealButton = document.getElementById('randomMealButton');
        const searchInput = document.getElementById('searchInput');
        const mealSection = document.getElementById('mealSection');

        const randomMealURL = "https://www.themealdb.com/api/json/v1/1/random.php";
        const searchMealURL = "https://www.themealdb.com/api/json/v1/1/search.php?s=";

        const fetchMealData = (url, displayIngredients) => {
            fetch(url)
                .then((response) => response.json())
                .then((payload) => appendMealData(payload, displayIngredients))
                .catch((error) => console.error("Error fetching meal data:", error));
        }

        const appendMealData = (data, displayIngredients) => {
            console.log(data);

            const firstMeal = data.meals ? data.meals[0] : data.meal; // Handle different API response structures
            if (!firstMeal) {
                console.error("No meal data found.");
                return;
            }

            const mealName = firstMeal.strMeal;

            const nameHeader = document.createElement('h3');
            nameHeader.innerText = "Have some " + mealName;
            mealSection.innerHTML = ''; // Clear previous content
            mealSection.appendChild(nameHeader);

            const image = document.createElement('img');
            image.src = firstMeal.strMealThumb;
            image.alt = "image of " + mealName;
            mealSection.appendChild(image);

            if (displayIngredients) {
                const ingredientsList = document.createElement('ul');
                ingredientsList.innerHTML = getIngredients(firstMeal);
                mealSection.appendChild(ingredientsList);
            }
        }

        const getIngredients = (meal) => {
            let ingredients = '';
            for (let i = 1; i <= 20; i++) {
                const ingredient = meal['strIngredient' + i];
                const measure = meal['strMeasure' + i];
                if (ingredient && measure) {
                    ingredients += `<li>${measure} ${ingredient}</li>`;
                }
            }
            return ingredients;
        }

        triggerButton.addEventListener("click", () => fetchMealData(randomMealURL, false));
        randomMealButton.addEventListener("click", () => fetchMealData(randomMealURL, true));
        
        searchButton.addEventListener("click", () => {
            const searchTerm = searchInput.value.trim();
            if (searchTerm !== "") {
                fetchMealData(searchMealURL + searchTerm, true);
            } else {
                console.error("Please enter a search term.");
            }
        });
    </script>
</body>
</html>

